<!-- views/student.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags and title -->
</head>
<body style="font-family: 'Arial', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4;">
    <%- include('header.ejs') %>
    <h1 style="color: #333;">Student Data</h1>
    <table border="1" style="width: 80%; margin: 20px auto; border-collapse: collapse;">
        <tr>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left; background-color: #333; color: #fff;">ID</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left; background-color: #333; color: #fff;">Name</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left; background-color: #333; color: #fff;">Position</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left; background-color: #333; color: #fff;">Actions</th>
        </tr>
        <% students.forEach(student => { %>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: left;"><%= student.id %></td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: left;"><%= student.name %></td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: left;"><%= student.position %></td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: left;">
                    <button onclick="deleteStudent(<%= student.id %>)">Delete</button>
                </td>
            </tr>
        <% }); %>
    </table>

    <script>
        function deleteStudent(id) {
            fetch(`/student/delete/${id}`, {
                method: 'DELETE',
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                // Add logic to handle success or failure
            })
            .catch(error => {
                console.error('Error:', error);
                // Handle errors
            });
        }
    </script>

    <%- include('footer.ejs') %>
</body>
</html>
